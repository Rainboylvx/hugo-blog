

1． 首要原则是尽量最低限度地共享对象， 减少需要同步的场合。
一个对象能不暴露给别的线程就不要暴露； 如果要暴露， 优先考虑
immutable对象； 实在不行才暴露可修改的对象， 并用同步措施来充分
保护它。
2． 其次是使用高级的并发编程构件， 如TaskQueue、 ProducerConsumer Queue、 CountDownLatch等等。
3． 最后不得已必须使用底层同步原语（primitives） 时， 只用非递
归的互斥器和条件变量， 慎用读写锁， 不要用信号量。
4． 除了使用atomic整数之外， 不自己编写lock-free代码3， 也不要
用“内核级”同步原语45。 不凭空猜测“哪种做法性能会更好”， 比如spin
lock vs. mutex。