---
title: "outline"
date: 2025-09-24
draft: true
toc: true
tags: ["nvim","oi"]
categories: [""]
---

å¥½çš„ï¼Œä½ æ­£åœ¨å¯»æ‰¾çš„è¿™ç±»æ’ä»¶é€šå¸¸è¢«ç§°ä¸ºâ€œç¬¦å·å¤§çº²â€ (Symbol Outline) æˆ–â€œç¬¦å·æ ‘â€ (Symbol Tree)ã€‚å®ƒä»¬åˆ©ç”¨ Neovim çš„ LSP (Language Server Protocol) åŠŸèƒ½æ¥è·å–ä»£ç çš„ç»“æ„ä¿¡æ¯ã€‚

å¯¹äº C++ï¼Œä½ éœ€è¦å…ˆç¡®ä¿ä½ çš„ Neovim å·²ç»é…ç½®å¥½äº† LSPï¼Œå¹¶ä¸”å®‰è£…äº† C++ çš„è¯­è¨€æœåŠ¡å™¨ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ `clangd`ã€‚

è¿™é‡Œæœ‰å‡ ä¸ªéå¸¸å‡ºè‰²çš„æ’ä»¶å¯ä»¥å®Œç¾å®ç°ä½ æƒ³è¦çš„åŠŸèƒ½ï¼Œå®ƒä»¬éƒ½éå¸¸æ¥è¿‘ VS Code çš„å¤§çº²è§†å›¾ã€‚

### ğŸ‘‘ é¦–é€‰æ¨è: symbols-outline.nvim

**é“¾æ¥:** [simrat39/symbols-outline.nvim](https://github.com/simrat39/symbols-outline.nvim)

è¿™å¯èƒ½æ˜¯æœ€ç›´æ¥ã€æœ€åƒ VS Code å¤§çº²çš„æ’ä»¶ã€‚å®ƒæä¾›ä¸€ä¸ªä¾§è¾¹æ ï¼Œç”¨æ ‘çŠ¶ç»“æ„æ¸…æ™°åœ°å±•ç¤ºå½“å‰æ–‡ä»¶ä¸­çš„æ‰€æœ‰ç¬¦å·ï¼ˆç±»ã€å‡½æ•°ã€å˜é‡ã€å®ç­‰ï¼‰ï¼Œå¹¶ä¸”ç‚¹å‡»å³å¯è·³è½¬ã€‚

**ç‰¹ç‚¹:**

  * éå¸¸ç›´è§‚çš„æ ‘çŠ¶è§†å›¾ã€‚
  * è‡ªåŠ¨éšä»£ç ä¿®æ”¹è€Œæ›´æ–°ã€‚
  * æ”¯æŒä¸°å¯Œçš„å›¾æ ‡ (éœ€è¦ `nvim-web-devicons`)ã€‚
  * é«˜åº¦å¯å®šåˆ¶ï¼Œå¯ä»¥è°ƒæ•´ä½ç½®ã€å®½åº¦ç­‰ã€‚

**ä½¿ç”¨ `lazy.nvim` çš„å®‰è£…é…ç½®ç¤ºä¾‹:**

```lua
{
  "simrat39/symbols-outline.nvim",
  keys = {
    { "<leader>o", "<cmd>SymbolsOutline<cr>", desc = "Toggle Outline" } 
  },
  config = function()
    require("symbols-outline").setup()
  end,
}
```

  * ä¸Šé¢çš„é…ç½®æ·»åŠ äº†ä¸€ä¸ªå¿«æ·é”® `<leader>o` æ¥æ‰“å¼€æˆ–å…³é—­å¤§çº²ä¾§è¾¹æ ã€‚

-----

### ğŸš€ å¼ºå¤§å¤‡é€‰: aerial.nvim

**é“¾æ¥:** [stevearc/aerial.nvim](https://github.com/stevearc/aerial.nvim)

Aerial æ˜¯å¦ä¸€ä¸ªåŠŸèƒ½æå…¶å¼ºå¤§çš„å¤§çº²æ’ä»¶ã€‚å®ƒä¸ä»…èƒ½æ˜¾ç¤ºç¬¦å·ï¼Œè¿˜èƒ½ä¸ `nvim-navic` (ä¸€ä¸ªåœ¨é¡¶éƒ¨æ˜¾ç¤ºå½“å‰ä»£ç ä¸Šä¸‹æ–‡çš„æ’ä»¶) ç­‰å·¥å…·é›†æˆï¼Œæä¾›æ›´ä¸°å¯Œçš„å¯¼èˆªä½“éªŒã€‚

**ç‰¹ç‚¹:**

  * æ”¯æŒå¤šç§åç«¯ï¼ˆLSP, Treesitterï¼‰ï¼Œä¿¡æ¯æ›´å…¨é¢ã€‚
  * UI é«˜åº¦å¯å®šåˆ¶ï¼Œå¯ä»¥ä½œä¸ºä¾§è¾¹æ æˆ–æµ®åŠ¨çª—å£ã€‚
  * å¯ä»¥æ˜¾ç¤ºä»£ç çš„å±‚çº§ç»“æ„ï¼Œéå¸¸é€‚åˆå¤§å‹é¡¹ç›®ã€‚
  * è¿‡æ»¤å’Œæ’åºåŠŸèƒ½å¼ºå¤§ã€‚

**ä½¿ç”¨ `lazy.nvim` çš„å®‰è£…é…ç½®ç¤ºä¾‹:**

```lua
{
  "stevearc/aerial.nvim",
  -- å¯é€‰ä¾èµ–ï¼Œä½†å¼ºçƒˆæ¨è
  dependencies = {
     "nvim-treesitter/nvim-treesitter",
     "nvim-tree/nvim-web-devicons"
  },
  keys = {
    { "<leader>o", "<cmd>AerialToggle<cr>", desc = "Toggle Outline" }
  },
  config = function()
    require('aerial').setup({
      -- ä½ å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œå„ç§å®šåˆ¶
      -- æ¯”å¦‚ï¼Œé»˜è®¤åœ¨æ‰“å¼€æ–‡ä»¶æ—¶è‡ªåŠ¨æ‰“å¼€ aerial
      -- on_attach = function(bufnr)
      --   vim.api.nvim_create_autocmd("BufEnter", {
      --     buffer = bufnr,
      --     callback = function()
      --       require("aerial").open({focus = false})
      --     end
      --   })
      -- end
    })
  end,
}
```

-----

### ğŸš è½»é‡å¤‡é€‰: Telescope (å†…ç½®åŠŸèƒ½)

å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ [nvim-telescope/telescope.nvim](https://github.com/nvim-telescope/telescope.nvim)ï¼Œä½ å…¶å®å·²ç»æœ‰äº†ä¸€ä¸ªè½»é‡çº§çš„å¤§çº²åŠŸèƒ½ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæŒä¹…çš„ä¾§è¾¹æ ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯ä»¥éšæ—¶å‘¼å‡ºçš„æµ®åŠ¨æœç´¢æ¡†ã€‚

**å¦‚ä½•ä½¿ç”¨:**
åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œç›´æ¥è¾“å…¥å‘½ä»¤ï¼š

```
:Telescope lsp_document_symbols
```

è¿™ä¼šå¼¹å‡ºä¸€ä¸ªæµ®åŠ¨çª—å£ï¼Œåˆ—å‡ºå½“å‰æ–‡ä»¶æ‰€æœ‰çš„ç¬¦å·ï¼Œä½ å¯ä»¥é€šè¿‡æ¨¡ç³Šæœç´¢å¿«é€Ÿå®šä½å¹¶è·³è½¬ã€‚

**ç‰¹ç‚¹:**

  * æ— éœ€å®‰è£…é¢å¤–æ’ä»¶ï¼ˆå¦‚æœä½ å·²å®‰è£… Telescopeï¼‰ã€‚
  * åˆ©ç”¨ Telescope å¼ºå¤§çš„æ¨¡ç³Šæœç´¢å’Œé¢„è§ˆåŠŸèƒ½ã€‚
  * æ›´é€‚åˆâ€œç”¨å®Œå³èµ°â€çš„å¿«é€Ÿè·³è½¬åœºæ™¯ã€‚

**å»ºè®®ä¸ºå®ƒç»‘å®šä¸€ä¸ªå¿«æ·é”®:**

```lua
-- åœ¨ä½ çš„ Telescope é…ç½®æˆ–é”®ä½é…ç½®æ–‡ä»¶ä¸­
keys = {
  { 
    "<leader>os", -- 'o' for outline, 's' for symbols
    "<cmd>Telescope lsp_document_symbols<cr>", 
    desc = "Outline Symbols" 
  },
}
```

### æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©

| æ’ä»¶ | UI é£æ ¼ | ä¼˜ç‚¹ | é€‚åˆåœºæ™¯ |
| :--- | :--- | :--- | :--- |
| **symbols-outline.nvim** | **ä¾§è¾¹æ  (Sidebar)** | **æœ€åƒ VS Code**ï¼Œç›´è§‚æ˜“ç”¨ | æƒ³è¦ä¸€ä¸ªå›ºå®šã€å¸¸é©»çš„å¤§çº²è§†å›¾æ¥éšæ—¶æŸ¥çœ‹ä»£ç ç»“æ„çš„ç”¨æˆ·ã€‚ |
| **aerial.nvim** | **ä¾§è¾¹æ  / æµ®åŠ¨çª—å£** | åŠŸèƒ½æœ€å¼ºå¤§ï¼Œé«˜åº¦å¯å®šåˆ¶ï¼Œé›†æˆæ€§å¥½ | è¿½æ±‚æè‡´å®šåˆ¶å’Œå¼ºå¤§åŠŸèƒ½ï¼Œå¸Œæœ›å¤§çº²èƒ½ä¸å…¶ä»–å¯¼èˆªå·¥å…·è”åŠ¨çš„å¼€å‘è€…ã€‚ |
| **Telescope** | **æµ®åŠ¨æœç´¢æ¡†** | è½»é‡ï¼Œæ— éœ€é¢å¤–æ’ä»¶ï¼Œæœç´¢é©±åŠ¨ | ä¹ æƒ¯ä½¿ç”¨ Telescope è¿›è¡Œä¸€åˆ‡æ“ä½œï¼Œå–œæ¬¢ç”¨æœç´¢ä»£æ›¿ç‚¹å‡»ï¼Œä¸æƒ³è¦å¸¸é©»ä¾§è¾¹æ çš„ç”¨æˆ·ã€‚ |

**æˆ‘çš„å»ºè®®æ˜¯ï¼š**

> å¦‚æœä½ åˆšä» VS Code è½¬è¿‡æ¥ï¼Œæƒ³è¦æœ€ç›¸ä¼¼çš„ä½“éªŒï¼Œè¯·ç›´æ¥å®‰è£… **`symbols-outline.nvim`**ã€‚
>
> å¦‚æœä½ æ˜¯ä¸€ä¸ªå–œæ¬¢æ·±åº¦å®šåˆ¶å’ŒæŠ˜è…¾çš„ "Power User"ï¼Œå¯ä»¥è¯•è¯• **`aerial.nvim`**ã€‚
>
> å¦‚æœä½ å´‡å°šæç®€ï¼Œå¹¶ä¸”æ˜¯ Telescope çš„é‡åº¦ç”¨æˆ·ï¼Œé‚£ä¹ˆä½¿ç”¨å†…ç½®çš„ `lsp_document_symbols` å°±è¶³å¤Ÿäº†ã€‚